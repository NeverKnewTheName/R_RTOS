<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>R_RTOS: R_RTOS_task.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">R_RTOS
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">DistributedRealTimeOperatingSystemfortheARMCortexMArchitecture</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_r___r_t_o_s__task_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">R_RTOS_task.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions for creating, maintaining and handling tasks.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_r___r_t_o_s__scheduler_8h_source.html">R_RTOS_scheduler.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_r___r_t_o_s__task_8h_source.html">R_RTOS_task.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_r___r_t_o_s__stack_8h_source.html">R_RTOS_stack.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_r___r_t_o_s__sem_8h_source.html">R_RTOS_sem.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_r___r_t_o_s__timer_8h_source.html">R_RTOS_timer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_r___r_t_o_s__events_8h_source.html">R_RTOS_events.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_r___r_t_o_s__mem_mngr_8h_source.html">R_RTOS_memMngr.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abc28b742f4b88a0ddaa03999ba1b1edf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r___r_t_o_s__task_8c.html#abc28b742f4b88a0ddaa03999ba1b1edf">os_SCHEDULE</a> (void)</td></tr>
<tr class="memdesc:abc28b742f4b88a0ddaa03999ba1b1edf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedules the next ready task according to its priority.  <a href="#abc28b742f4b88a0ddaa03999ba1b1edf">More...</a><br /></td></tr>
<tr class="separator:abc28b742f4b88a0ddaa03999ba1b1edf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0af359f43c10d537163606eab55037b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_r___r_t_o_s__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r___r_t_o_s__task_8c.html#ad0af359f43c10d537163606eab55037b">tsk_tskInit</a> (const <a class="el" href="_r___r_t_o_s__inc_8h.html#a2ade6f7044e8201b1ef76ef623838b99">TskID</a> tskID, const <a class="el" href="_r___r_t_o_s__inc_8h.html#a229328e4c290c03fb83af8e8d16412fb">TskStartAddr</a> const strtAddr, const <a class="el" href="_r___r_t_o_s__inc_8h.html#ae03669e305ec8b93fba83f49807f18a1">TskEndAddr</a> const endAddr, const <a class="el" href="_r___r_t_o_s__inc_8h.html#ada39144b6f8cd87b923b5bf2fad78bf1">StackSize</a> stkSze)</td></tr>
<tr class="memdesc:ad0af359f43c10d537163606eab55037b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a task according to the provided input parameters.  <a href="#ad0af359f43c10d537163606eab55037b">More...</a><br /></td></tr>
<tr class="separator:ad0af359f43c10d537163606eab55037b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03597e988295c6cf30ba59fae400a806"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_r___r_t_o_s__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r___r_t_o_s__task_8c.html#a03597e988295c6cf30ba59fae400a806">os_IDLETskInit</a> (const <a class="el" href="_r___r_t_o_s__inc_8h.html#a229328e4c290c03fb83af8e8d16412fb">TskStartAddr</a> const strtAddr)</td></tr>
<tr class="memdesc:a03597e988295c6cf30ba59fae400a806"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the IDLE Task.  <a href="#a03597e988295c6cf30ba59fae400a806">More...</a><br /></td></tr>
<tr class="separator:a03597e988295c6cf30ba59fae400a806"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5129bd9579de1e955b48f0ef164b9241"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_r___r_t_o_s__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r___r_t_o_s__task_8c.html#a5129bd9579de1e955b48f0ef164b9241">tsk_tskDestroy</a> (<a class="el" href="_r___r_t_o_s__inc_8h.html#abf73076e6fa046f3519a37e9ad34ad7d">TskTCB</a> *const tsk)</td></tr>
<tr class="memdesc:a5129bd9579de1e955b48f0ef164b9241"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy the given task.  <a href="#a5129bd9579de1e955b48f0ef164b9241">More...</a><br /></td></tr>
<tr class="separator:a5129bd9579de1e955b48f0ef164b9241"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a397e2866c19cde7b643c5506f548afc7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_r___r_t_o_s__inc_8h.html#a52651e50bfc8071dd043015ea2fe9343">BitsOSFlags</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r___r_t_o_s__task_8c.html#a397e2866c19cde7b643c5506f548afc7">gOS_FLAGS</a></td></tr>
<tr class="memdesc:a397e2866c19cde7b643c5506f548afc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flags used for maintaining the OS.  <a href="#a397e2866c19cde7b643c5506f548afc7">More...</a><br /></td></tr>
<tr class="separator:a397e2866c19cde7b643c5506f548afc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ddfc99999877ed7de24484e41ad521b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_r___r_t_o_s__inc_8h.html#abf73076e6fa046f3519a37e9ad34ad7d">TskTCB</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r___r_t_o_s__task_8c.html#a3ddfc99999877ed7de24484e41ad521b">p_cur_tsk_tcb</a></td></tr>
<tr class="memdesc:a3ddfc99999877ed7de24484e41ad521b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to currently running task's <a class="el" href="structtsk_t_c_b.html" title="Task Control Block. ">tskTCB</a>.  <a href="#a3ddfc99999877ed7de24484e41ad521b">More...</a><br /></td></tr>
<tr class="separator:a3ddfc99999877ed7de24484e41ad521b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dae7ec16a8c57a4afbb2b95e42d47bb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_r___r_t_o_s__inc_8h.html#ac82ec54129091dcecd0e68cacf585078">PTskTCB</a> const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r___r_t_o_s__task_8c.html#a3dae7ec16a8c57a4afbb2b95e42d47bb">pIDLETsk</a> = &amp;( tsk_AR[0] )</td></tr>
<tr class="memdesc:a3dae7ec16a8c57a4afbb2b95e42d47bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constant pointer to the IDLE Task's <a class="el" href="structtsk_t_c_b.html" title="Task Control Block. ">tskTCB</a>.  <a href="#a3dae7ec16a8c57a4afbb2b95e42d47bb">More...</a><br /></td></tr>
<tr class="separator:a3dae7ec16a8c57a4afbb2b95e42d47bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions for creating, maintaining and handling tasks. </p>
<dl class="section author"><dt>Author</dt><dd>Christian Neuberger (<a href="#" onclick="location.href='mai'+'lto:'+'Neu'+'be'+'rge'+'rC'+'h50'+'34'+'4@t'+'h-'+'nue'+'rn'+'ber'+'g.'+'de'; return false;">Neube<span style="display: none;">.nosp@m.</span>rger<span style="display: none;">.nosp@m.</span>Ch503<span style="display: none;">.nosp@m.</span>44@t<span style="display: none;">.nosp@m.</span>h-nue<span style="display: none;">.nosp@m.</span>rnbe<span style="display: none;">.nosp@m.</span>rg.de</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>23.11.2015 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a03597e988295c6cf30ba59fae400a806"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_r___r_t_o_s__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a> os_IDLETskInit </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="_r___r_t_o_s__inc_8h.html#a229328e4c290c03fb83af8e8d16412fb">TskStartAddr</a> const&#160;</td>
          <td class="paramname"><em>strtAddr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates the IDLE Task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">strtAddr</td><td>Address of the IDLE Task's function </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>RetCode Return the success of the operation</dd></dl>
<p>Create the IDLE Task and provide its <a class="el" href="structtsk_t_c_b.html" title="Task Control Block. ">tskTCB</a> with information. </p>

</div>
</div>
<a class="anchor" id="abc28b742f4b88a0ddaa03999ba1b1edf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_SCHEDULE </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedules the next ready task according to its priority. </p>
<p>The task queue is scanned until a task ready to run is found. The queue is sorted according to the tasks' priority beforehand. </p><dl class="section post"><dt>Postcondition</dt><dd>p_nxt_tsk_tcb A pointer to the chosen task's <a class="el" href="structtsk_t_c_b.html" title="Task Control Block. ">tskTCB</a> is stored to this global variable. </dd>
<dd>
If the next task does not equal the current task a context switch is initiated by setting PendSV to pending </dd></dl>

</div>
</div>
<a class="anchor" id="a5129bd9579de1e955b48f0ef164b9241"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_r___r_t_o_s__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a> tsk_tskDestroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_r___r_t_o_s__inc_8h.html#abf73076e6fa046f3519a37e9ad34ad7d">TskTCB</a> *const&#160;</td>
          <td class="paramname"><em>tsk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy the given task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tsk</td><td>Pointer to the <a class="el" href="structtsk_t_c_b.html" title="Task Control Block. ">tskTCB</a> of the task to be destroyed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>RetCode Return the success of the operation</dd></dl>
<p>Release all resources used by the task and delete it from the queue.</p>
<p>This does not trigger the scheduler! </p>

</div>
</div>
<a class="anchor" id="ad0af359f43c10d537163606eab55037b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_r___r_t_o_s__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a> tsk_tskInit </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="_r___r_t_o_s__inc_8h.html#a2ade6f7044e8201b1ef76ef623838b99">TskID</a>&#160;</td>
          <td class="paramname"><em>tskID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_r___r_t_o_s__inc_8h.html#a229328e4c290c03fb83af8e8d16412fb">TskStartAddr</a> const&#160;</td>
          <td class="paramname"><em>strtAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_r___r_t_o_s__inc_8h.html#ae03669e305ec8b93fba83f49807f18a1">TskEndAddr</a> const&#160;</td>
          <td class="paramname"><em>endAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_r___r_t_o_s__inc_8h.html#ada39144b6f8cd87b923b5bf2fad78bf1">StackSize</a>&#160;</td>
          <td class="paramname"><em>stkSze</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a task according to the provided input parameters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tskID</td><td>ID of the task to be created </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">strtAddr</td><td>Address of the task's function </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">endAddr</td><td>Optional address of a function to which the task shall return to after its execution (provide NULL for default behavior) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stkSze</td><td>desired size of the task's stack </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>RetCode Return the success of the operation</dd></dl>
<p>Creates a task by allocating space for its <a class="el" href="structtsk_t_c_b.html" title="Task Control Block. ">tskTCB</a> and filling it with the provided and computed informations. Also allocates the stack for the task.</p>
<dl class="section note"><dt>Note</dt><dd>Task is not activated yet! </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a397e2866c19cde7b643c5506f548afc7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_r___r_t_o_s__inc_8h.html#a52651e50bfc8071dd043015ea2fe9343">BitsOSFlags</a> gOS_FLAGS</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flags used for maintaining the OS. </p>
<p>Contains various flags for the operation of the OS.</p>
<p>might be obsolete </p>

</div>
</div>
<a class="anchor" id="a3ddfc99999877ed7de24484e41ad521b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_r___r_t_o_s__inc_8h.html#abf73076e6fa046f3519a37e9ad34ad7d">TskTCB</a>* p_cur_tsk_tcb</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pointer to currently running task's <a class="el" href="structtsk_t_c_b.html" title="Task Control Block. ">tskTCB</a>. </p>
<p>To keep track of the currently running task this pointer stores it. Is set to NULL when the currently running task is ended/killed, which is then acknowledged by the context switch (No saving of the current task's context).</p>
<p>Initialized to NULL </p>

</div>
</div>
<a class="anchor" id="a3dae7ec16a8c57a4afbb2b95e42d47bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_r___r_t_o_s__inc_8h.html#ac82ec54129091dcecd0e68cacf585078">PTskTCB</a> const pIDLETsk = &amp;( tsk_AR[0] )</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constant pointer to the IDLE Task's <a class="el" href="structtsk_t_c_b.html" title="Task Control Block. ">tskTCB</a>. </p>
<p>Since the IDLE Task is not allocated dynamically its location in the memory will not change during runtime. This Pointer is used to always reference the IDLE Task and thus the start of the list containing all tasks in the System.</p>
<p>Initialized to the address of the IDLE Task's <a class="el" href="structtsk_t_c_b.html" title="Task Control Block. ">tskTCB</a>. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_74389ed8173ad57b461b9d623a1f3867.html">Source</a></li><li class="navelem"><a class="el" href="_r___r_t_o_s__task_8c.html">R_RTOS_task.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
