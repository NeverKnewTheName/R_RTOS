<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>R_RTOS: Semaphore</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">R_RTOS
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">DistributedRealTimeOperatingSystemfortheARMCortexMArchitecture</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__Semaphore.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Semaphore<div class="ingroups"><a class="el" href="group__Synchronization.html">Synchronization</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions for creating, initializing, maintaining Semaphores.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga77e32c5216459f85317ea4cdbc56a531"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Semaphore.html#ga77e32c5216459f85317ea4cdbc56a531">MEM_OBJECTS_SEM</a>&#160;&#160;&#160;(uint8_t)0x4u</td></tr>
<tr class="memdesc:ga77e32c5216459f85317ea4cdbc56a531"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of objects for the semaphore memory pool.  <a href="#ga77e32c5216459f85317ea4cdbc56a531">More...</a><br /></td></tr>
<tr class="separator:ga77e32c5216459f85317ea4cdbc56a531"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga68b38763cc121b266a792122dc60349c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="R__RTOS__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Semaphore.html#ga68b38763cc121b266a792122dc60349c">sem_InitSems</a> (void)</td></tr>
<tr class="memdesc:ga68b38763cc121b266a792122dc60349c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the semaphore functionality.  <a href="#ga68b38763cc121b266a792122dc60349c">More...</a><br /></td></tr>
<tr class="separator:ga68b38763cc121b266a792122dc60349c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6cee1c0e25279b2f2042abcda28bf033"><td class="memItemLeft" align="right" valign="top"><a class="el" href="R__RTOS__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Semaphore.html#ga6cee1c0e25279b2f2042abcda28bf033">sem_DeleteTskSemQ</a> (<a class="el" href="R__RTOS__inc_8h.html#ac82ec54129091dcecd0e68cacf585078">PTskTCB</a> const tsk)</td></tr>
<tr class="memdesc:ga6cee1c0e25279b2f2042abcda28bf033"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a SemLst entry from the semaphore queue.  <a href="#ga6cee1c0e25279b2f2042abcda28bf033">More...</a><br /></td></tr>
<tr class="separator:ga6cee1c0e25279b2f2042abcda28bf033"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gaa79a678b448ba335e9ea783203fed6c9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaa79a678b448ba335e9ea783203fed6c9"></a>
static <a class="el" href="R__RTOS__inc_8h.html#af4122a81b390d3c8725c7e151ecf9cfd">Sem</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Semaphore.html#gaa79a678b448ba335e9ea783203fed6c9">ar_Sems</a> [<a class="el" href="R__RTOS__inc_8h.html#ae9dd548797f86260b3017bbc083d3c9e">AMOUNT_OF_SEMS</a>]</td></tr>
<tr class="memdesc:gaa79a678b448ba335e9ea783203fed6c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains all semaphores. <br /></td></tr>
<tr class="separator:gaa79a678b448ba335e9ea783203fed6c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gace7eddaa765e958c2893738be6cea7c8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gace7eddaa765e958c2893738be6cea7c8"></a>
static volatile <a class="el" href="R__RTOS__inc_8h.html#a2ade6f7044e8201b1ef76ef623838b99">TskID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Semaphore.html#gace7eddaa765e958c2893738be6cea7c8">ar_SemsWaitQueue</a> [<a class="el" href="R__RTOS__inc_8h.html#ae9dd548797f86260b3017bbc083d3c9e">AMOUNT_OF_SEMS</a>]</td></tr>
<tr class="memdesc:gace7eddaa765e958c2893738be6cea7c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains the <a class="el" href="R__RTOS__inc_8h.html#a2ade6f7044e8201b1ef76ef623838b99">TskID</a> of the start of the respective semaphore's wait queue. <br /></td></tr>
<tr class="separator:gace7eddaa765e958c2893738be6cea7c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga390ce0fcb69c220941f520f1fa01c972"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga390ce0fcb69c220941f520f1fa01c972"></a>
static volatile <a class="el" href="R__RTOS__memMngr_8h.html#a45bb5f14f010053b22d49b81e127e49c">MemPoolID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Semaphore.html#ga390ce0fcb69c220941f520f1fa01c972">memPoolID_SEM</a></td></tr>
<tr class="memdesc:ga390ce0fcb69c220941f520f1fa01c972"><td class="mdescLeft">&#160;</td><td class="mdescRight">ID of the memory pool memory allocation request of semaphores are served from. <br /></td></tr>
<tr class="separator:ga390ce0fcb69c220941f520f1fa01c972"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Functions for creating, initializing, maintaining Semaphores. </p>
<p>Functions for creating, initializing, maintaining and handling Semaphores.</p>
<h2>Priority Inheritance</h2>
<p>When access to a specific resource is requested, but cannot be granted, the requesting consumer is put into a wait queue. These wait queues are sorted according to the priority of their entities. Therefore a waiting high priority task will be granted access to the resource before a waiting low priority task receives the resource. But if the resource is taken by a lower priority task and a high priority task requests access, the resource remains at the lower priority task. Therefore the high priority task is put into a waiting queue and its execution is suspended. If the lower priority task occupying the resource is suspended, because e.g. a medium priority task is activated, this medium priority task would receive processor time before the high priority task, that is currently waiting on the resource. This is called <em>Priority Inversion</em>.<br />
 To avoid that a lower priority task is executed before a high priority task <em>Priority Inheritance</em> is introduced. If a lower priority priority task is occupying a resource while a high priority task requests access to said resource the lower priority task inherits the priority of the high priority task for the duration of the access to the protected resource. Hence a medium priority task cannot preempt the actually lower priority task while it is occupying the resource and the high priority task is waiting for this resource.</p>
<h2>Semaphores</h2>
<p>Semaphores are a signaling mechanism to allow multiple access to a protected resource. A consumer does not get ownership of the semaphore. If a consumer is granted access the semaphore counter is decremented. When the consumer is done with accessing the protected resource the semaphore is then incremented again. As soon as the counter reaches 0 no more accesses to the protected resource will be granted. All incoming consumers are put into a wait queue and must wait for the counter to increment again and therefore for another consumer, who was previously granted access to the resource, to release the resource and hence increment the semaphore counter.</p>
<h3>Counting Semaphores</h3>
<p>Counting semaphores contain a counter which can be set to a specific value are incremented variably and decremented by one. This is used to limit access to a resource to the counter value.</p>
<h3>Binary Semaphores</h3>
<p>Contrary to counting semaphores, binary semaphores can only take the values 0 or 1 (taken or free). Much like mutexes they can be used for mutual exclusion, but unlike mutexes the consumer, which is granted access, does not receive the ownership of the semaphore.</p>
<h2>Difference Mutex and Binary Semaphore</h2>
<p>Since a Binary Semaphore only depends on signaling, it can be signaled from anywhere, whereas a mutex can only be released by the task that occupies it. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga77e32c5216459f85317ea4cdbc56a531"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEM_OBJECTS_SEM&#160;&#160;&#160;(uint8_t)0x4u</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of objects for the semaphore memory pool. </p>
<dl class="section note"><dt>Note</dt><dd>User defined </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga6cee1c0e25279b2f2042abcda28bf033"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="R__RTOS__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a> sem_DeleteTskSemQ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="R__RTOS__inc_8h.html#ac82ec54129091dcecd0e68cacf585078">PTskTCB</a> const&#160;</td>
          <td class="paramname"><em>tsk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a SemLst entry from the semaphore queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tsk</td><td>Task to be deleted from the semaphore's queue it is currently queued into </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return the success of the operation </dd></dl>

</div>
</div>
<a class="anchor" id="ga68b38763cc121b266a792122dc60349c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="R__RTOS__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a> sem_InitSems </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the semaphore functionality. </p>
<dl class="section return"><dt>Returns</dt><dd>Return the success of the operation</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Semaphores need to be initialized before usage! Usually this takes place during initialization of the OS. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
