<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>R_RTOS: R_RTOS_scheduler.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">R_RTOS
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">DistributedRealTimeOperatingSystemfortheARMCortexMArchitecture</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_r___r_t_o_s__scheduler_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">R_RTOS_scheduler.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Scheduler and related functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;MKL05Z4.h&quot;</code><br />
<code>#include &quot;<a class="el" href="_r___r_t_o_s__inc_8h_source.html">R_RTOS_inc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_r___r_t_o_s__scheduler_8h_source.html">R_RTOS_scheduler.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_r___r_t_o_s__task_8h_source.html">R_RTOS_task.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_r___r_t_o_s___bit_magic_8h_source.html">R_RTOS_BitMagic.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a20857e80dc21af3794049054527893f3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_r___r_t_o_s__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r___r_t_o_s__scheduler_8c.html#a20857e80dc21af3794049054527893f3">tsk_rmvTskActvTskLst</a> (<a class="el" href="_r___r_t_o_s__inc_8h.html#ac82ec54129091dcecd0e68cacf585078">PTskTCB</a> const tsk)</td></tr>
<tr class="memdesc:a20857e80dc21af3794049054527893f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a Task from the active task list.  <a href="#a20857e80dc21af3794049054527893f3">More...</a><br /></td></tr>
<tr class="separator:a20857e80dc21af3794049054527893f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a177ced3e248caef2d8dccf1b48651190"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_r___r_t_o_s__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r___r_t_o_s__scheduler_8c.html#a177ced3e248caef2d8dccf1b48651190">tsk_insrtTskActvTskLst</a> (<a class="el" href="_r___r_t_o_s__inc_8h.html#ac82ec54129091dcecd0e68cacf585078">PTskTCB</a> const tsk)</td></tr>
<tr class="memdesc:a177ced3e248caef2d8dccf1b48651190"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert a task into the active task list.  <a href="#a177ced3e248caef2d8dccf1b48651190">More...</a><br /></td></tr>
<tr class="separator:a177ced3e248caef2d8dccf1b48651190"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac169821dd7bc5c5e1c38e99670397b42"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r___r_t_o_s__scheduler_8c.html#ac169821dd7bc5c5e1c38e99670397b42">os_INIT_Scheduler</a> (void)</td></tr>
<tr class="memdesc:ac169821dd7bc5c5e1c38e99670397b42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the Scheduler mechanism.  <a href="#ac169821dd7bc5c5e1c38e99670397b42">More...</a><br /></td></tr>
<tr class="separator:ac169821dd7bc5c5e1c38e99670397b42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc28b742f4b88a0ddaa03999ba1b1edf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r___r_t_o_s__scheduler_8c.html#abc28b742f4b88a0ddaa03999ba1b1edf">os_SCHEDULE</a> (void)</td></tr>
<tr class="memdesc:abc28b742f4b88a0ddaa03999ba1b1edf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedules the next ready task according to its priority.  <a href="#abc28b742f4b88a0ddaa03999ba1b1edf">More...</a><br /></td></tr>
<tr class="separator:abc28b742f4b88a0ddaa03999ba1b1edf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a37a9ce768971b0749054305a15feb360"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_r___r_t_o_s__inc_8h.html#ac82ec54129091dcecd0e68cacf585078">PTskTCB</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r___r_t_o_s__scheduler_8c.html#a37a9ce768971b0749054305a15feb360">pIDLETsk</a></td></tr>
<tr class="memdesc:a37a9ce768971b0749054305a15feb360"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constant pointer to the IDLE Task's <a class="el" href="structtsk_t_c_b.html" title="Task Control Block. ">tskTCB</a>.  <a href="#a37a9ce768971b0749054305a15feb360">More...</a><br /></td></tr>
<tr class="separator:a37a9ce768971b0749054305a15feb360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3e6eecb0aa3e960aa54783fef6ecefa"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="_r___r_t_o_s__inc_8h.html#ac82ec54129091dcecd0e68cacf585078">PTskTCB</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r___r_t_o_s__scheduler_8c.html#ab3e6eecb0aa3e960aa54783fef6ecefa">p_cur_tsk_tcb</a> = <a class="el" href="_r___r_t_o_s__inc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="memdesc:ab3e6eecb0aa3e960aa54783fef6ecefa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to currently running task's <a class="el" href="structtsk_t_c_b.html" title="Task Control Block. ">tskTCB</a>.  <a href="#ab3e6eecb0aa3e960aa54783fef6ecefa">More...</a><br /></td></tr>
<tr class="separator:ab3e6eecb0aa3e960aa54783fef6ecefa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac21e74dec863fcd1f610bbbe00bf9458"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="_r___r_t_o_s__inc_8h.html#ac82ec54129091dcecd0e68cacf585078">PTskTCB</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r___r_t_o_s__scheduler_8c.html#ac21e74dec863fcd1f610bbbe00bf9458">p_nxt_tsk_tcb</a> = <a class="el" href="_r___r_t_o_s__inc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="memdesc:ac21e74dec863fcd1f610bbbe00bf9458"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to task's <a class="el" href="structtsk_t_c_b.html" title="Task Control Block. ">tskTCB</a>, which is scheduled to run next.  <a href="#ac21e74dec863fcd1f610bbbe00bf9458">More...</a><br /></td></tr>
<tr class="separator:ac21e74dec863fcd1f610bbbe00bf9458"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6eb5bb4c99e989f07e5608f540c33ee4"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="_r___r_t_o_s__inc_8h.html#a52651e50bfc8071dd043015ea2fe9343">BitsOSFlags</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r___r_t_o_s__scheduler_8c.html#a6eb5bb4c99e989f07e5608f540c33ee4">gOS_FLAGS</a></td></tr>
<tr class="memdesc:a6eb5bb4c99e989f07e5608f540c33ee4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flags used for maintaining the OS.  <a href="#a6eb5bb4c99e989f07e5608f540c33ee4">More...</a><br /></td></tr>
<tr class="separator:a6eb5bb4c99e989f07e5608f540c33ee4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Scheduler and related functions. </p>
<dl class="section author"><dt>Author</dt><dd>Christian Neuberger (<a href="#" onclick="location.href='mai'+'lto:'+'Neu'+'be'+'rge'+'rC'+'h50'+'34'+'4@t'+'h-'+'nue'+'rn'+'ber'+'g.'+'de'; return false;">Neube<span style="display: none;">.nosp@m.</span>rger<span style="display: none;">.nosp@m.</span>Ch503<span style="display: none;">.nosp@m.</span>44@t<span style="display: none;">.nosp@m.</span>h-nue<span style="display: none;">.nosp@m.</span>rnbe<span style="display: none;">.nosp@m.</span>rg.de</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>23.11.2015 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ac169821dd7bc5c5e1c38e99670397b42"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_INIT_Scheduler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the Scheduler mechanism. </p>
<dl class="section warning"><dt>Warning</dt><dd>MUST BE CALLED BEFORE THE SCHEDULER CAN BE USED! </dd></dl>

</div>
</div>
<a class="anchor" id="abc28b742f4b88a0ddaa03999ba1b1edf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_SCHEDULE </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedules the next ready task according to its priority. </p>
<p>The task queue is scanned until a task ready to run is found. The queue is sorted according to the tasks' priority beforehand. </p><dl class="section post"><dt>Postcondition</dt><dd>p_nxt_tsk_tcb A pointer to the chosen task's <a class="el" href="structtsk_t_c_b.html" title="Task Control Block. ">tskTCB</a> is stored to this global variable. </dd>
<dd>
If the next task does not equal the current task a context switch is initiated by setting PendSV to pending </dd></dl>

</div>
</div>
<a class="anchor" id="a177ced3e248caef2d8dccf1b48651190"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_r___r_t_o_s__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a> tsk_insrtTskActvTskLst </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_r___r_t_o_s__inc_8h.html#ac82ec54129091dcecd0e68cacf585078">PTskTCB</a> const&#160;</td>
          <td class="paramname"><em>tsk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Insert a task into the active task list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tsk</td><td>Task to insert into the active task list </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return the success of the operation</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>The task has to be ready to be run when queued into the active task list. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The task must not already be in the active task list. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>The active task list is always started by the IDLE task as the root node. THIS MUST NOT CHANGE. </dd></dl>

</div>
</div>
<a class="anchor" id="a20857e80dc21af3794049054527893f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_r___r_t_o_s__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a> tsk_rmvTskActvTskLst </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_r___r_t_o_s__inc_8h.html#ac82ec54129091dcecd0e68cacf585078">PTskTCB</a> const&#160;</td>
          <td class="paramname"><em>tsk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a Task from the active task list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tsk</td><td>Task to delete from the active task list </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return the success of the operation </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a6eb5bb4c99e989f07e5608f540c33ee4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gOS_FLAGS</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flags used for maintaining the OS. </p>
<p>Contains various flags for the operation of the OS.</p>
<p>might be obsolete </p>

</div>
</div>
<a class="anchor" id="ab3e6eecb0aa3e960aa54783fef6ecefa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">p_cur_tsk_tcb = <a class="el" href="_r___r_t_o_s__inc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pointer to currently running task's <a class="el" href="structtsk_t_c_b.html" title="Task Control Block. ">tskTCB</a>. </p>
<p>To keep track of the currently running task this pointer stores it. Is set to NULL when the currently running task is ended/killed, which is then acknowledged by the context switch (No saving of the current task's context).</p>
<p>Initialized to NULL </p>

</div>
</div>
<a class="anchor" id="ac21e74dec863fcd1f610bbbe00bf9458"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">p_nxt_tsk_tcb = <a class="el" href="_r___r_t_o_s__inc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pointer to task's <a class="el" href="structtsk_t_c_b.html" title="Task Control Block. ">tskTCB</a>, which is scheduled to run next. </p>
<p>The scheduler sets this pointer to the task which is to be run after the context switch. The context switch automatically assigns its value to p_cur_tst_tcb once the context is switched.</p>
<p>Initialized to NULL </p>

</div>
</div>
<a class="anchor" id="a37a9ce768971b0749054305a15feb360"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pIDLETsk</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constant pointer to the IDLE Task's <a class="el" href="structtsk_t_c_b.html" title="Task Control Block. ">tskTCB</a>. </p>
<p>Since the IDLE Task is not allocated dynamically its location in the memory will not change during runtime. This Pointer is used to always reference the IDLE Task and thus the start of the list containing all tasks in the System.</p>
<p>Initialized to the address of the IDLE Task's <a class="el" href="structtsk_t_c_b.html" title="Task Control Block. ">tskTCB</a>. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_74389ed8173ad57b461b9d623a1f3867.html">Source</a></li><li class="navelem"><a class="el" href="_r___r_t_o_s__scheduler_8c.html">R_RTOS_scheduler.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
