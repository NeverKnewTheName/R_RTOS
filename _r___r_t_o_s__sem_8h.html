<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>R_RTOS: R_RTOS_sem.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">R_RTOS
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">DistributedRealTimeOperatingSystemfortheARMCortexMArchitecture</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_r___r_t_o_s__sem_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">R_RTOS_sem.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions for creating, initializing, maintaining and handling Semaphores.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_r___r_t_o_s__inc_8h_source.html">R_RTOS_inc.h</a>&quot;</code><br />
</div>
<p><a href="_r___r_t_o_s__sem_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a77e32c5216459f85317ea4cdbc56a531"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r___r_t_o_s__sem_8h.html#a77e32c5216459f85317ea4cdbc56a531">MEM_OBJECTS_SEM</a>&#160;&#160;&#160;(uint8_t)0x4u</td></tr>
<tr class="memdesc:a77e32c5216459f85317ea4cdbc56a531"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of objects for the semaphore memory pool.  <a href="#a77e32c5216459f85317ea4cdbc56a531">More...</a><br /></td></tr>
<tr class="separator:a77e32c5216459f85317ea4cdbc56a531"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a68b38763cc121b266a792122dc60349c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_r___r_t_o_s__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r___r_t_o_s__sem_8h.html#a68b38763cc121b266a792122dc60349c">sem_InitSems</a> (void)</td></tr>
<tr class="memdesc:a68b38763cc121b266a792122dc60349c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the semaphore functionality.  <a href="#a68b38763cc121b266a792122dc60349c">More...</a><br /></td></tr>
<tr class="separator:a68b38763cc121b266a792122dc60349c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62414039a6ce95e8208ebc4fe67d0610"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_r___r_t_o_s__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r___r_t_o_s__sem_8h.html#a62414039a6ce95e8208ebc4fe67d0610">sem_TakeSem</a> (<a class="el" href="_r___r_t_o_s__inc_8h.html#ac82ec54129091dcecd0e68cacf585078">PTskTCB</a> const tsk, const <a class="el" href="_r___r_t_o_s__inc_8h.html#a0e91b259511e391ba8d7c6f0963c4888">SemNr</a> semNr, const <a class="el" href="_r___r_t_o_s__inc_8h.html#aed568e9fa30417e4671c4932c04bdbae">SysTicks</a> maxSysTicksToWait)</td></tr>
<tr class="memdesc:a62414039a6ce95e8208ebc4fe67d0610"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to take the semaphore with the given number for the specified task.  <a href="#a62414039a6ce95e8208ebc4fe67d0610">More...</a><br /></td></tr>
<tr class="separator:a62414039a6ce95e8208ebc4fe67d0610"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0aceab8b14a7e485798ac329f74b52d8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_r___r_t_o_s__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r___r_t_o_s__sem_8h.html#a0aceab8b14a7e485798ac329f74b52d8">sem_GiveSem</a> (<a class="el" href="_r___r_t_o_s__inc_8h.html#ac82ec54129091dcecd0e68cacf585078">PTskTCB</a> const tsk, const <a class="el" href="_r___r_t_o_s__inc_8h.html#a0e91b259511e391ba8d7c6f0963c4888">SemNr</a> semNr)</td></tr>
<tr class="memdesc:a0aceab8b14a7e485798ac329f74b52d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases the semaphore with the given number.  <a href="#a0aceab8b14a7e485798ac329f74b52d8">More...</a><br /></td></tr>
<tr class="separator:a0aceab8b14a7e485798ac329f74b52d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cee1c0e25279b2f2042abcda28bf033"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_r___r_t_o_s__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_r___r_t_o_s__sem_8h.html#a6cee1c0e25279b2f2042abcda28bf033">sem_DeleteTskSemQ</a> (<a class="el" href="_r___r_t_o_s__inc_8h.html#ac82ec54129091dcecd0e68cacf585078">PTskTCB</a> const tsk)</td></tr>
<tr class="memdesc:a6cee1c0e25279b2f2042abcda28bf033"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a SemLst entry from the semaphore queue.  <a href="#a6cee1c0e25279b2f2042abcda28bf033">More...</a><br /></td></tr>
<tr class="separator:a6cee1c0e25279b2f2042abcda28bf033"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions for creating, initializing, maintaining and handling Semaphores. </p>
<dl class="section author"><dt>Author</dt><dd>Christian Neuberger (<a href="#" onclick="location.href='mai'+'lto:'+'Neu'+'be'+'rge'+'rC'+'h50'+'34'+'4@t'+'h-'+'nue'+'rn'+'ber'+'g.'+'de'; return false;">Neube<span style="display: none;">.nosp@m.</span>rger<span style="display: none;">.nosp@m.</span>Ch503<span style="display: none;">.nosp@m.</span>44@t<span style="display: none;">.nosp@m.</span>h-nue<span style="display: none;">.nosp@m.</span>rnbe<span style="display: none;">.nosp@m.</span>rg.de</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>15.12.2015 </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a77e32c5216459f85317ea4cdbc56a531"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEM_OBJECTS_SEM&#160;&#160;&#160;(uint8_t)0x4u</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of objects for the semaphore memory pool. </p>
<dl class="section note"><dt>Note</dt><dd>User defined </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a6cee1c0e25279b2f2042abcda28bf033"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_r___r_t_o_s__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a> sem_DeleteTskSemQ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_r___r_t_o_s__inc_8h.html#ac82ec54129091dcecd0e68cacf585078">PTskTCB</a> const&#160;</td>
          <td class="paramname"><em>tsk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a SemLst entry from the semaphore queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tsk</td><td>Task to be deleted from the semaphore's queue it is currently queued into </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return the success of the operation </dd></dl>

</div>
</div>
<a class="anchor" id="a0aceab8b14a7e485798ac329f74b52d8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_r___r_t_o_s__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a> sem_GiveSem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_r___r_t_o_s__inc_8h.html#ac82ec54129091dcecd0e68cacf585078">PTskTCB</a> const&#160;</td>
          <td class="paramname"><em>tsk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_r___r_t_o_s__inc_8h.html#a0e91b259511e391ba8d7c6f0963c4888">SemNr</a>&#160;</td>
          <td class="paramname"><em>semNr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Releases the semaphore with the given number. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tsk</td><td>Pointer to the task's TskTcb </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">semNr</td><td>Number of the semaphore to be released </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return the success of the operation</dd></dl>
<p>The original priority of the task is restored. The next task in the semaphore queue (if any) is given the semaphore and set to the suspended task state. The semaphore queue is adjusted automatically. </p>

</div>
</div>
<a class="anchor" id="a68b38763cc121b266a792122dc60349c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_r___r_t_o_s__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a> sem_InitSems </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the semaphore functionality. </p>
<dl class="section return"><dt>Returns</dt><dd>Return the success of the operation</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Semaphores need to be initialized before usage! Usually this takes place during initialization of the OS. </dd></dl>

</div>
</div>
<a class="anchor" id="a62414039a6ce95e8208ebc4fe67d0610"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_r___r_t_o_s__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a> sem_TakeSem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_r___r_t_o_s__inc_8h.html#ac82ec54129091dcecd0e68cacf585078">PTskTCB</a> const&#160;</td>
          <td class="paramname"><em>tsk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_r___r_t_o_s__inc_8h.html#a0e91b259511e391ba8d7c6f0963c4888">SemNr</a>&#160;</td>
          <td class="paramname"><em>semNr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_r___r_t_o_s__inc_8h.html#aed568e9fa30417e4671c4932c04bdbae">SysTicks</a>&#160;</td>
          <td class="paramname"><em>maxSysTicksToWait</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempts to take the semaphore with the given number for the specified task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tsk</td><td>Pointer to the task's TskTcb </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">semNr</td><td>Number of the semaphore to be taken </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxSysTicksToWait</td><td>Maximum number of SysTicks to wait until the task is unblocked. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return the success of the operation</dd></dl>
<p>If the semaphore is not yet taken, the task requesting this semaphore is now occupying the semaphore. The execution of the task is continued.</p>
<p>If the semaphore is already taken when the task tries to take it, the task is queued into the semaphore queue. If its priority is higher than the task's occupying the semaphore priority, the task's occupying the semaphore priority is adjusted. =&gt; priority inheritance.</p>
<p>The mechanism ensures that no lower priority task, whose priority is still higher than the task's occupying the semaphore priority, is executed as long as the high priority task is waiting on the semaphore. Further tasks trying to take the semaphore are queued into the semaphore list according to their priority. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="_r___r_t_o_s__sem_8h.html">R_RTOS_sem.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
