<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>R_RTOS: StackedSoftwareTimer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">R_RTOS
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">DistributedRealTimeOperatingSystemfortheARMCortexMArchitecture</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__StackedSoftwareTimer.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">StackedSoftwareTimer<div class="ingroups"><a class="el" href="group__Timer.html">Timer</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions for creating, initializing, maintaining and handling a task timers.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gae7c2e7a95d593cb505f501c969b3f1f1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae7c2e7a95d593cb505f501c969b3f1f1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__StackedSoftwareTimer.html#gae7c2e7a95d593cb505f501c969b3f1f1">MEM_OBJECTS_TMR</a>&#160;&#160;&#160;(uint8_t)0x4u</td></tr>
<tr class="memdesc:gae7c2e7a95d593cb505f501c969b3f1f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of <a class="el" href="group__sync.html#gac2cb205c15d93994be988d6f233c19db" title="unified structure for all synchronization mechanism objects. ">SyncEle</a> that can be allocated by the Timer mechanism. <br /></td></tr>
<tr class="separator:gae7c2e7a95d593cb505f501c969b3f1f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafff28d9ab7a4d2f2a185adaa4609bb7d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gafff28d9ab7a4d2f2a185adaa4609bb7d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__StackedSoftwareTimer.html#gafff28d9ab7a4d2f2a185adaa4609bb7d">TMR_INVALID_TIME</a>&#160;&#160;&#160;(<a class="el" href="R__RTOS__inc_8h.html#acc7de00b71f0da7a6bfb45c6f5b3c405">LifeTime</a>)0xFFFFFFFFu</td></tr>
<tr class="memdesc:gafff28d9ab7a4d2f2a185adaa4609bb7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Value for an invalid LifeTime. <br /></td></tr>
<tr class="separator:gafff28d9ab7a4d2f2a185adaa4609bb7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga442fb82de03842d80b67adb5c64ea47c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__StackedSoftwareTimer.html#ga442fb82de03842d80b67adb5c64ea47c">TMR_PIT_DELAY</a>&#160;&#160;&#160;(uint32_t)0x3u</td></tr>
<tr class="memdesc:ga442fb82de03842d80b67adb5c64ea47c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delay compensation between PIT and TPM timers.  <a href="#ga442fb82de03842d80b67adb5c64ea47c">More...</a><br /></td></tr>
<tr class="separator:ga442fb82de03842d80b67adb5c64ea47c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gabc28b742f4b88a0ddaa03999ba1b1edf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__StackedSoftwareTimer.html#gabc28b742f4b88a0ddaa03999ba1b1edf">os_SCHEDULE</a> (void)</td></tr>
<tr class="memdesc:gabc28b742f4b88a0ddaa03999ba1b1edf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedules the next ready task according to its priority.  <a href="#gabc28b742f4b88a0ddaa03999ba1b1edf">More...</a><br /></td></tr>
<tr class="separator:gabc28b742f4b88a0ddaa03999ba1b1edf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga83e4c9920aae26d3dc3d10dbd69e3576"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="R__RTOS__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__StackedSoftwareTimer.html#ga83e4c9920aae26d3dc3d10dbd69e3576">tmr_InsertSysTmrQ</a> (<a class="el" href="R__RTOS__inc_8h.html#ac1fcc7b44d0e651d690bdbe50ffc8c0f">TmrFktCall</a> *sysFktTmr, <a class="el" href="R__RTOS__inc_8h.html#acc7de00b71f0da7a6bfb45c6f5b3c405">LifeTime</a> expires)</td></tr>
<tr class="memdesc:ga83e4c9920aae26d3dc3d10dbd69e3576"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert the given <a class="el" href="R__RTOS__inc_8h.html#ac1fcc7b44d0e651d690bdbe50ffc8c0f">TmrFktCall</a> object into the system timer queue according to its expiration time.  <a href="#ga83e4c9920aae26d3dc3d10dbd69e3576">More...</a><br /></td></tr>
<tr class="separator:ga83e4c9920aae26d3dc3d10dbd69e3576"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1ca469ffbe7b4a9051f7bc09461e51b4"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="R__RTOS__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__StackedSoftwareTimer.html#ga1ca469ffbe7b4a9051f7bc09461e51b4">tmr_InsertTskTmrQ</a> (<a class="el" href="R__RTOS__inc_8h.html#ac82ec54129091dcecd0e68cacf585078">PTskTCB</a> tsk, <a class="el" href="R__RTOS__inc_8h.html#acc7de00b71f0da7a6bfb45c6f5b3c405">LifeTime</a> expires)</td></tr>
<tr class="memdesc:ga1ca469ffbe7b4a9051f7bc09461e51b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert the given <a class="el" href="R__RTOS__inc_8h.html#abf73076e6fa046f3519a37e9ad34ad7d">TskTCB</a> object into the task timer queue according to its expiration time.  <a href="#ga1ca469ffbe7b4a9051f7bc09461e51b4">More...</a><br /></td></tr>
<tr class="separator:ga1ca469ffbe7b4a9051f7bc09461e51b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2d413cb64fe2c2179bd8b7565ffed132"><td class="memItemLeft" align="right" valign="top"><a class="el" href="R__RTOS__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__StackedSoftwareTimer.html#ga2d413cb64fe2c2179bd8b7565ffed132">tmr_INIT</a> (void)</td></tr>
<tr class="memdesc:ga2d413cb64fe2c2179bd8b7565ffed132"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calibrate the PIT Timer periodically.  <a href="#ga2d413cb64fe2c2179bd8b7565ffed132">More...</a><br /></td></tr>
<tr class="separator:ga2d413cb64fe2c2179bd8b7565ffed132"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac3b1bc7a90a2bee533daf2e140df3336"><td class="memItemLeft" align="right" valign="top"><a class="el" href="R__RTOS__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__StackedSoftwareTimer.html#gac3b1bc7a90a2bee533daf2e140df3336">tmr_setSysTimer</a> (<a class="el" href="R__RTOS__inc_8h.html#aad4b2141820674d80ce50eda2b38d594">SysFktID</a> fktID, <a class="el" href="R__RTOS__inc_8h.html#af746c5065e11e9e341883118a4e95d8a">TmrTime</a> msToWait, uint8_t periodicity)</td></tr>
<tr class="memdesc:gac3b1bc7a90a2bee533daf2e140df3336"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up a Timer to call a SysFkt corresponding to the given SysFktID as soon as the timer expires.  <a href="#gac3b1bc7a90a2bee533daf2e140df3336">More...</a><br /></td></tr>
<tr class="separator:gac3b1bc7a90a2bee533daf2e140df3336"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1553c1836a21857ad8329dd3a81de76c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="R__RTOS__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__StackedSoftwareTimer.html#ga1553c1836a21857ad8329dd3a81de76c">tmr_setTskTimer</a> (<a class="el" href="R__RTOS__inc_8h.html#ac82ec54129091dcecd0e68cacf585078">PTskTCB</a> const tsk, <a class="el" href="R__RTOS__inc_8h.html#af746c5065e11e9e341883118a4e95d8a">TmrTime</a> msToWait)</td></tr>
<tr class="memdesc:ga1553c1836a21857ad8329dd3a81de76c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up a Timer for a task and queues it into the Timer queue according to its WaitTime relative to the current PIT value.  <a href="#ga1553c1836a21857ad8329dd3a81de76c">More...</a><br /></td></tr>
<tr class="separator:ga1553c1836a21857ad8329dd3a81de76c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga708fdafe3d0d9260260f2b7b9384821d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__StackedSoftwareTimer.html#ga708fdafe3d0d9260260f2b7b9384821d">tmr_TskTimerElapsed</a> (void)</td></tr>
<tr class="memdesc:ga708fdafe3d0d9260260f2b7b9384821d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to be called as soon as a Timer expires.  <a href="#ga708fdafe3d0d9260260f2b7b9384821d">More...</a><br /></td></tr>
<tr class="separator:ga708fdafe3d0d9260260f2b7b9384821d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga810e17155c9fcffd90ad106948729e2a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga810e17155c9fcffd90ad106948729e2a"></a>
<a class="el" href="R__RTOS__inc_8h.html#a827136f3233fd732876ecea0f2c81253">SysFkt</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__StackedSoftwareTimer.html#ga810e17155c9fcffd90ad106948729e2a">sys_SysFkt</a> []</td></tr>
<tr class="memdesc:ga810e17155c9fcffd90ad106948729e2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">System function array to hold various kinds of system functions. System functions can be referenced by their index in this array. <br /></td></tr>
<tr class="separator:ga810e17155c9fcffd90ad106948729e2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9ef4ebb5fad3d83c1f87d009ea6bdd63"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__bestBuddyAlloc.html#ga45bb5f14f010053b22d49b81e127e49c">MemPoolID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__StackedSoftwareTimer.html#ga9ef4ebb5fad3d83c1f87d009ea6bdd63">memPoolID_TMR</a></td></tr>
<tr class="memdesc:ga9ef4ebb5fad3d83c1f87d009ea6bdd63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory Pool ID for the timer's memory pool.  <a href="#ga9ef4ebb5fad3d83c1f87d009ea6bdd63">More...</a><br /></td></tr>
<tr class="separator:ga9ef4ebb5fad3d83c1f87d009ea6bdd63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga970781089a6bbce19ee519e77edfb12d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="R__RTOS__inc_8h.html#a1b3cacca4d8f6cf8845d119a5289528e">Timer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__StackedSoftwareTimer.html#ga970781089a6bbce19ee519e77edfb12d">tskTMR</a></td></tr>
<tr class="memdesc:ga970781089a6bbce19ee519e77edfb12d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The start node for the task Timer queue.  <a href="#ga970781089a6bbce19ee519e77edfb12d">More...</a><br /></td></tr>
<tr class="separator:ga970781089a6bbce19ee519e77edfb12d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac45127dd1f284f531d98412903b25140"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="R__RTOS__inc_8h.html#a1b3cacca4d8f6cf8845d119a5289528e">Timer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__StackedSoftwareTimer.html#gac45127dd1f284f531d98412903b25140">sysTMR</a></td></tr>
<tr class="memdesc:gac45127dd1f284f531d98412903b25140"><td class="mdescLeft">&#160;</td><td class="mdescRight">The start node for the system Timer queue.  <a href="#gac45127dd1f284f531d98412903b25140">More...</a><br /></td></tr>
<tr class="separator:gac45127dd1f284f531d98412903b25140"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Functions for creating, initializing, maintaining and handling a task timers. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga442fb82de03842d80b67adb5c64ea47c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TMR_PIT_DELAY&#160;&#160;&#160;(uint32_t)0x3u</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delay compensation between PIT and TPM timers. </p>
<dl class="section return"><dt>Returns</dt><dd>Delay value</dd></dl>
<p>Since the PIT and TPM timers are driven by different clock sources (BusClock for PIT; OSCERCLK for TPM) they might suffer from a desynchronization. In order to overcome this issue, a small delay is allowed. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gabc28b742f4b88a0ddaa03999ba1b1edf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_SCHEDULE </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedules the next ready task according to its priority. </p>
<p>The task queue is scanned until a task ready to run is found. The queue is sorted according to the tasks' priority beforehand. </p><dl class="section post"><dt>Postcondition</dt><dd>p_nxt_tsk_tcb A pointer to the chosen task's <a class="el" href="structtskTCB.html" title="Task Control Block. ">tskTCB</a> is stored to this global variable. </dd>
<dd>
If the next task does not equal the current task a context switch is initiated by setting PendSV to pending </dd></dl>

</div>
</div>
<a class="anchor" id="ga2d413cb64fe2c2179bd8b7565ffed132"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="R__RTOS__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a> tmr_INIT </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calibrate the PIT Timer periodically. </p>
<p>Since the PIT timer is clocked by the Bus clock whereas the TPM module has various clock sources the two timers drift away from each other. To compensate this behavior the PIT timer is calibrated in intervals according to a TPM timer. </p>

</div>
</div>
<a class="anchor" id="ga83e4c9920aae26d3dc3d10dbd69e3576"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="R__RTOS__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a> tmr_InsertSysTmrQ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="R__RTOS__inc_8h.html#ac1fcc7b44d0e651d690bdbe50ffc8c0f">TmrFktCall</a> *&#160;</td>
          <td class="paramname"><em>sysFktTmr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="R__RTOS__inc_8h.html#acc7de00b71f0da7a6bfb45c6f5b3c405">LifeTime</a>&#160;</td>
          <td class="paramname"><em>expires</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Insert the given <a class="el" href="R__RTOS__inc_8h.html#ac1fcc7b44d0e651d690bdbe50ffc8c0f">TmrFktCall</a> object into the system timer queue according to its expiration time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sysFktTmr</td><td>Pointer to the <a class="el" href="R__RTOS__inc_8h.html#ac1fcc7b44d0e651d690bdbe50ffc8c0f">TmrFktCall</a> object to insert </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">expires</td><td>Expiration time</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>RetCode </dd>
<dd>
RET_OK </dd>
<dd>
RET_NOK</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Entries are sorted according to their ascending timer expiration. </dd></dl>

</div>
</div>
<a class="anchor" id="ga1ca469ffbe7b4a9051f7bc09461e51b4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="R__RTOS__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a> tmr_InsertTskTmrQ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="R__RTOS__inc_8h.html#ac82ec54129091dcecd0e68cacf585078">PTskTCB</a>&#160;</td>
          <td class="paramname"><em>tsk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="R__RTOS__inc_8h.html#acc7de00b71f0da7a6bfb45c6f5b3c405">LifeTime</a>&#160;</td>
          <td class="paramname"><em>expires</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Insert the given <a class="el" href="R__RTOS__inc_8h.html#abf73076e6fa046f3519a37e9ad34ad7d">TskTCB</a> object into the task timer queue according to its expiration time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tsk</td><td>Pointer to the <a class="el" href="R__RTOS__inc_8h.html#abf73076e6fa046f3519a37e9ad34ad7d">TskTCB</a> object to insert </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">expires</td><td>Expiration time</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>RetCode </dd>
<dd>
RET_OK </dd>
<dd>
RET_NOK</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Entries are sorted according to their ascending timer expiration. </dd></dl>

</div>
</div>
<a class="anchor" id="gac3b1bc7a90a2bee533daf2e140df3336"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="R__RTOS__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a> tmr_setSysTimer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="R__RTOS__inc_8h.html#aad4b2141820674d80ce50eda2b38d594">SysFktID</a>&#160;</td>
          <td class="paramname"><em>fktID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="R__RTOS__inc_8h.html#af746c5065e11e9e341883118a4e95d8a">TmrTime</a>&#160;</td>
          <td class="paramname"><em>msToWait</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>periodicity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up a Timer to call a SysFkt corresponding to the given SysFktID as soon as the timer expires. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fktID</td><td>SysFktID of the function to call upon expiration </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msToWait</td><td>Period of time to wait in ms </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">periodicity</td><td>Periodicity of the timer (if set to 1 the timer will reset itself)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>RetCode </dd>
<dd>
RET_OK </dd>
<dd>
RET_NOK </dd></dl>

</div>
</div>
<a class="anchor" id="ga1553c1836a21857ad8329dd3a81de76c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="R__RTOS__inc_8h.html#ae652fbd48bfccbcc4f573e8d45529404">RetCode</a> tmr_setTskTimer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="R__RTOS__inc_8h.html#ac82ec54129091dcecd0e68cacf585078">PTskTCB</a> const&#160;</td>
          <td class="paramname"><em>tsk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="R__RTOS__inc_8h.html#af746c5065e11e9e341883118a4e95d8a">TmrTime</a>&#160;</td>
          <td class="paramname"><em>msToWait</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up a Timer for a task and queues it into the Timer queue according to its WaitTime relative to the current PIT value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tsk</td><td>Pointer to the task's TskTcb </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msToWait</td><td>Period of time to wait in ms.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>RetCode Return the success of the operation</dd></dl>
<p>Sets up a Timer for the given task and queues the Timer into the Timer queue. The Timer, which expires the earliest is always the start of the list. Might adjust the startTMRNode. </p>

</div>
</div>
<a class="anchor" id="ga708fdafe3d0d9260260f2b7b9384821d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tmr_TskTimerElapsed </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to be called as soon as a Timer expires. </p>
<p>Adjusts the TskEvtFlags and sets the task ready (if it is not waiting on any other event). Also maintains the Timer queue and automatically scans for more Timers to be expired. Resets the timer which triggers the next Timer.</p>
<p>Triggers the scheduler! </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ga9ef4ebb5fad3d83c1f87d009ea6bdd63"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">memPoolID_TMR</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Memory Pool ID for the timer's memory pool. </p>
<p>Allocation requests for <a class="el" href="group__sync.html#gac2cb205c15d93994be988d6f233c19db">SyncEle</a> for the Timer will be served from the memory pool corresponding to this <a class="el" href="group__bestBuddyAlloc.html#ga45bb5f14f010053b22d49b81e127e49c">MemPoolID</a>. </p>

</div>
</div>
<a class="anchor" id="gac45127dd1f284f531d98412903b25140"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sysTMR</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The start node for the system Timer queue. </p>
<p>Initialized to NULL. </p>

</div>
</div>
<a class="anchor" id="ga970781089a6bbce19ee519e77edfb12d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">tskTMR</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The start node for the task Timer queue. </p>
<p>Initialized to NULL. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
